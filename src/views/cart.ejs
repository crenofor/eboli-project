<!DOCTYPE html>
<html>
<head>
  <title>Carrinho - Eboli Store</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

  <style>
    /* Anima√ß√£o suave na entrada */
    .fade-in {
      animation: fadeIn 0.6s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* Sombras */
    .card-shadow {
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    /* Navbar espa√ßada */
    .navbar-nav .nav-item {
      margin-right: 20px;
    }

    /* Tabela mais bonita */
    table {
      background: #fff;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
  </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm px-4">
    <a class="navbar-brand fw-bold" href="/welcome">Eboli Store</a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menu">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="menu">

      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" href="/welcome">Home</a>
        </li>
      </ul>

      <div class="d-flex align-items-center gap-3">

        <a href="/cart" class="text-white fs-4">
          <i class="bi bi-cart-fill"></i>
        </a>

        <span class="text-light small">
          üëã Ol√°, <strong><%= user.username %></strong>
        </span>

        <a class="btn btn-outline-light btn-sm" href="/logout">Sair</a>

      </div>

    </div>
</nav>

<div class="container mt-4 fade-in">

  <h2 class="mb-4">Seu Carrinho</h2>

  <% if (itens.length === 0) { %>

      <div class="alert alert-info p-3 shadow-sm">
        Seu carrinho est√° vazio! 
        <a href="/welcome" class="alert-link">Voltar √†s compras</a>
      </div>

  <% } else { %>

    <table class="table table-bordered table-striped">
      <tr class="table-primary">
        <th>Produto</th>
        <th>Qtd</th>
        <th>Pre√ßo</th>
        <th style="width: 180px;">A√ß√µes</th>
      </tr>

      <% itens.forEach(item => { %>
        <tr>
          <td><%= item.nome %></td>
          <td><%= item.quantidade %></td>
          <td>R$ <%= (item.preco * item.quantidade).toFixed(2) %></td>
          <td>

            <form action="/cart/add/<%= item.id %>" method="POST" style="display:inline;">
              <button class="btn btn-success btn-sm">
                <i class="bi bi-plus-lg"></i>
              </button>
            </form>

            <form action="/cart/remove/<%= item.id %>" method="POST" style="display:inline;">
              <button class="btn btn-warning btn-sm text-white">
                <i class="bi bi-dash-lg"></i>
              </button>
            </form>

            <form action="/cart/delete/<%= item.id %>" method="POST" style="display:inline;">
              <button class="btn btn-danger btn-sm">
                <i class="bi bi-trash3-fill"></i>
              </button>
            </form>

          </td>
        </tr>
      <% }) %>
    </table>

    <h4 class="mt-3">Total: <strong>R$ <%= total %></strong></h4>

    <form action="/cart/clear" method="POST">
      <button class="btn btn-danger mt-2">
        <i class="bi bi-x-circle-fill me-1"></i> Esvaziar Carrinho
      </button>
    </form>

  <% } %>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
